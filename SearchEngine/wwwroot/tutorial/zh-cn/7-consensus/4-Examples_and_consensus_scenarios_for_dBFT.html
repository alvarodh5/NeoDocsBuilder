<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="robots" content="index,follow">
    <meta name="author" content="neo-project">
    <meta name="application-name" content="neo.org">
    <meta name="renderer" content="ie-stand">
    <title>dBFT 共识示例与场景</title>
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Neo Documentation" />
    <meta property="og:description" content="Neo Documentation" />
    <meta property="og:image" content="/img/twitter-img.jpg" />
    <meta name="twitter:title" content="Neo Documentation" />
    <meta name="twitter:description" content="Neo Documentation" />
    <meta name="twitter:image" content="/img/twitter-img.jpg" />
    <meta name="twitter:card" content="summary_large_image" />

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
    <link rel="manifest" href="/img/site.webmanifest">
    <link rel="mask-icon" href="/img/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#00aba9">
    <meta name="theme-color" content="#ffffff">

    <link href="https://neo-cdn.azureedge.net/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://neo-cdn.azureedge.net/lib/animate.css/animate.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/styles/default.min.css">
    <link href="/lib/font-awesome/css/all.min.css" rel="stylesheet" />
    <link href="/css/site.min.css" rel="stylesheet" />
</head>
<body data-spy="scroll" data-target="#navbar-sidenav">
    <nav class="navbar fixed-top navbar-expand-lg py-1 px-3 px-sm-4 px-md-5">
        <a class="navbar-brand" href="https://neo.org">
            <img class="logo" src="/img/logo.svg" alt="NEO Logo" />
            <img class="logo-dark" src="/img/logo-dark.svg" alt="NEO Logo" />
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/docs">Documentation</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/tutorial">Tutorial</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/faq">FAQ</a>
                </li>
                <li class="nav-item" style="margin-right: 100px">
                    <a class="nav-link" href="/articles">Articles</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link d-inline-block" href="javascript:" onclick="language('en-us')">EN</a>|<a class="nav-link d-inline-block" href="javascript:" onclick="language('zh-cn')">中文</a>
                </li>
            </ul>
            <form class="form-inline my-2 my-lg-0 d-none">
                <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
            </form>
        </div>
    </nav>
    <div class="container-fluid" style="margin-top: 55px">
        <div class="row d-flex">
            <div class="d-none d-md-block catalog py-2 py-md-5 pl-md-3">
                
<nav class='nav nav-pills flex-column ml-3'>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>NEO 介绍</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/1-introduction/1-Introduction_to_NEO.html'>简介</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/1-introduction/2-Cryptography_Blockchain_and_Smart_Contracts.html'>密码学、区块链和智能合约</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/1-introduction/3-Fundamentals_of_NEO.html'>基础知识</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/1-introduction/resource.html'>更多资源</a>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>钱包</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/2-wallet/1-Introduction_to_wallets.html'>介绍</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/2-wallet/2-Key_derivation_and_address_generation_on_NEO.html'>私钥和地址生成</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/2-wallet/3-Key_encryption_and_contract_accounts.html'>私钥与合约账户</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/2-wallet/4-UTXO_and_account_models.html'>UTXO 与账户模型</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/2-wallet/resource.html'>更多资源</a>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>交易</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/3-transactions/1-Introduction_to_transactions.html'>介绍</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/3-transactions/2-Structure_of_NEO_transactions.html'>交易结构</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/3-transactions/3-NEO_transaction_types.html'>交易类型</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/3-transactions/4-NEO_transaction_fees.html'>交易手续费</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/3-transactions/resource.html'>更多资源</a>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>区块</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/4-blocks/1-Introduction_to_blocks_and_blockchain.html'>介绍</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/4-blocks/2-Structure_of_a_block.html'>区块结构</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/4-blocks/3-Block_creation_broadcasting.html'>区块创建与广播</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/4-blocks/4-Block_validation_processing.html'>区块验证</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/4-blocks/resource.html'>更多资源</a>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>NEO 网络</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/5-network/1-Introduction_to_the_NEO_network_protocol.html'>协议和网络</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/5-network/resource.html'>更多资源</a>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>持久性</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/6-persistence/1-persistence.html'>介绍</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/6-persistence/2-levelDB_data_structure.html'>LevelDB 数据结构</a>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>共识机制</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/7-consensus/1-Introduction_to_consensus.html'>介绍</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/7-consensus/2-Proof_of_work_and_proof_of_stake.html'>PoW 与 PoS</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/7-consensus/3-PBFT_and_DBFT.html'>pBFT 与 dBFT</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/7-consensus/4-Examples_and_consensus_scenarios_for_dBFT.html'>共识示例与场景</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/7-consensus/resource.html'>更多资源</a>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>智能合约</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/9-smartContract/What_is_smart_contract.html'>介绍</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/9-smartContract/Development_privateChain.html'>搭建私链</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/9-smartContract/Development_set_up.html'>搭建开发环境</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/9-smartContract/Development_compile.html'>编译、调用与部署</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/9-smartContract/Smart_Contract_basics.html'>智能合约基础</a>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>创建 NEP-5 合约</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/9-smartContract/What_is_nep5.html'>介绍</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/9-smartContract/Implementation_of_NEP5.html'>实现 NEP-5</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/9-smartContract/Give_an_ITO.html'>ITO</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/9-smartContract/UTXO.html'>UTXO 基础</a>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>CGAS</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/9-smartContract/cgas/1_what_is_cgas.html'>什么是 CGAS</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/9-smartContract/cgas/2_global_asset_and_nep5.html'>全局资产与 NEP-5</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/9-smartContract/cgas/3_utxo_model.html'>UTXO 模型</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/9-smartContract/cgas/4_trigger.html'>触发器</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/9-smartContract/cgas/5_minttokens_and_refund.html'>铸币与退款</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/9-smartContract/cgas/6_signature_and_verification.html'>签名与验证</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/9-smartContract/cgas/7_invocation.html'>交易调用</a>
</nav>
<a class='ml-0 my-1 nav-link' href='/tutorial/zh-cn/9-smartContract/neo_python_quickstart_cn.html'>NEO Python 快速入门</a>
</nav>
</nav>
            </div>
            <main class="p-3 p-sm-4 p-md-5">
                <a class="d-block d-md-none" href="javascript:" onclick="showCatalog()">Show / Hide Table of Contents</a>
                <h1 id='a401c5be'><span class='with-space bd-content-title'>dBFT 共识示例与场景<a class='anchorjs-link ' href='#a401c5be' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h1>
<h2 id='ecc2ffda'><span class='with-space bd-content-title'>Watch-only模式的共识节点<a class='anchorjs-link ' href='#ecc2ffda' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h2>
<p class='with-space'>正如可以在 <a href='../5-network/1-Introduction_to_the_NEO_network_protocol.html'> 网络教程</a> 中验证的那样，NEO网络以完全分布式的方式运行，如上图所示，摘自 <a href='https://medium.com/neoresearch/understanding-neo-network-in-five-pictures-e51b7c19d6e0' target='_blank'> Medium文章</a> :</p>
<p class='with-space'><img class='d-inline-block img-fluid' data-original='https://cdn-images-1.medium.com/max/800/1*vKbm_Di8GgQep8SyKeAWNw.png' alt='转发交易，直至达到共识节点（绿色）' referrerPolicy='no-referrer' /></p>
<p class='with-space'>绿色框代表共识，可出现在节点池中。消息全部广播给相邻节点（最好的情况下）。具有特殊功能的节点可以设计为仅监控来自共识节点的P2P消息，可以访问 <a href='https://neocompiler.io/#!/ecolab/cnnodesinfo' target='_blank'> NeoCompiler Eco共享私有链</a> 来查看相关信息。</p>
<p class='with-space'><img class='d-inline-block img-fluid' data-original='./watch-only-node.png' alt='仅限监视节点的信息' referrerPolicy='no-referrer' /></p>
<p class='with-space'>在这个图中，该Watch-Only节点还具有RPC功能。值得注意的是，节点可以具有其他特性并整理任意管理该客户端的节点所需的信息。</p>
<h2 id='d6bfa569'><span class='with-space bd-content-title'>dBFT 场景<a class='anchorjs-link ' href='#d6bfa569' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h2>
<p class='with-space'>为了举例说明一些可能的共识场景，考虑以下角色：</p>
<p class='with-space'><img class='d-inline-block img-fluid' data-original='./cn_characters.jpg' alt='dBFT共识节点角色' referrerPolicy='no-referrer' /></p>
<ul class='with-space'>
<li>
<p class='with-space'> <strong>N1：</strong> 张铮文，绝地大师 ;</p></li>
<li>
<p class='with-space'> <strong>N2：</strong> 达鸿飞，智能经济的壁炉;</p></li>
<li>
<p class='with-space'> <strong>N3：</strong> 林鹏涛，壁炉中的真相;</p></li>
<li>
<p class='with-space'> <strong>N4：</strong> NEO 生态系统，用户、交易所和开发人员的所有项目和利益的总和;</p></li>
<li>
<p class='with-space'> <strong>N5：</strong> City of Zion，世界各地的结合和合作;</p></li>
<li>
<p class='with-space'> <strong>N6：</strong> NeoResearch Buterfly，探索、恢复和改造的能力;</p></li>
<li>
<p class='with-space'> <strong>N7：</strong> 尤达大师，从过往的经验中学习。</p></li>
</ul>
<p class='with-space'>通过使用这7个共识节点并结合他们的优点，我们会给出一些例子让读者了解dBFT机制的工作原理：</p>
<h3 id='c3fcd62a'><span class='with-space bd-content-title'>创世块<a class='anchorjs-link ' href='#c3fcd62a' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h3>
<p class='with-space'>创世块创建了3个交易，其中原生资产NEO和GAS在该块中注册并创建，并转移到当前验证人的账户中（由这7个角色组成的多签名账户）;</p>
<h3 id='eb1df0fb'><span class='with-space bd-content-title'>情况 1 (正常运行)<a class='anchorjs-link ' href='#eb1df0fb' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h3>
<ul class='with-space'>
<li>
<p class='with-space'>我们处于高度 <code>1</code> 以及视图编号 <code>0</code> , 议长节点是 <code>N1</code> (考虑一个数学公式);</p></li>
<li>
<p class='with-space'>张铮文选择了由多签账户签名的第一组交易，并且发起了提案块 <code>b_1_0</code> ;</p></li>
<li>
<p class='with-space'>需要 <code>2f+1</code> 个节点对该提案达成一致。N2, N3, N4 and N5是首先响应希望处理这个区块的节点。包括N1,现在有5个节点 (正好是2f +1);</p></li>
<li>
<p class='with-space'>N1, ..., N5可能会首先进入提交阶段。</p></li>
<li>
<p class='with-space'>处于提交阶段的节点会自动发送针对当前区块提案 <code>b_1_0</code> 的签名;</p></li>
<li>
<p class='with-space'>一旦节点收集到 <code>2f+1</code> 个签名，就会向网络广播一个有效地区块。即便是一个 <strong>watch-only模式的节点</strong> 也可能是第一个执行该任务的节点(突出显示了这个MAS环境可能的工作方式)。</p></li>
</ul>
<h3 id='d049dccc'><span class='with-space bd-content-title'>情况 2 (议长故障)<a class='anchorjs-link ' href='#d049dccc' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h3>
<ul class='with-space'>
<li>
<p class='with-space'>现在我们处于高度 <code>2</code> 且视图编号为 <code>0</code> , 议长节点是 <code>N2</code> ;</p></li>
<li>
<p class='with-space'>达鸿飞小睡了一会儿，在这几秒钟内无法与其他角色交流了;</p></li>
<li>
<p class='with-space'> <code>2f+1</code> 个节点同意应该 <code>更改视图</code> 。网络上没有任何进展，节点应该严格按照将 <code>出块时间</code> 左移1位来设置超时时间。如果是15秒，则超时时间是30秒。</p></li>
<li>
<p class='with-space'>议长节点更改为N3。</p></li>
<li>
<p class='with-space'>N3节点只有在参与 <code>视图更改</code> 的情况下才会发起新的提案块, 否则, 它仍将等待 <code>N2</code> 的提案块。</p></li>
<li>
<p class='with-space'>考虑到N3得到了 <code>2f+1</code> 条 <code>更改视图</code> 消息, 它现在将发起新的提案块 <code>b_2_1</code> ;</p></li>
<li>
<p class='with-space'>从这里开始执行情况1下的正常流程。</p></li>
</ul>
<h3 id='b6349e3d'><span class='with-space bd-content-title'>情况 3 (提交之后发生故障)<a class='anchorjs-link ' href='#b6349e3d' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h3>
<ul class='with-space'>
<li>
<p class='with-space'>现在我们处于高度 <code>3</code> 以及视图 <code>0</code> , 议长节点是 <code>N3</code> ;</p></li>
<li>
<p class='with-space'>N3发起了提案块 <code>b_3_0</code> ;</p></li>
<li>
<p class='with-space'>从 <code>N3</code> , ..., <code>N7</code> 开始的大多数节点都同意提案;</p></li>
<li>
<p class='with-space'>然而，在进入提交节点后， <code>N4</code> 在广播其对区块 <code>b_3_0</code> 的签名前发生故障了;</p></li>
<li>
<p class='with-space'> <code>N3</code> , <code>N5</code> , <code>N6</code> 以及 <code>N7</code> ，现在只有 <code>2F</code> 个节点，仍然还需要一个对 <code>b_3_0</code> 的签名。 可能的情况是: 1) <code>N4</code> 从故障中恢复了; 2) <code>N1</code> 以及 <code>N2</code> 可以看到它们丢失的消息; 3) <code>N1</code> 和 <code>N2</code> 请求 <code>更改视图</code> ，但不会获得大多数 <code>M</code> 的同意，其他节点将发送一条 <code>Recovery</code> 消息来响应它们, 在该消息中，它们将自动接收到所有已知的消息。一旦这3个节点中的任何一个收到此类消息，它们将对当前区块 <code>b_3_0</code> 进行操作。</p></li>
</ul>
<p class='with-space'>需要注意的是，3个故障节点个数是 <code>f+1</code> ，这会阻止网络的运行。另一方面，应该注意的是，没有检测到真正的拜占庭行为，这只是延迟和连接的问题。从这个意义上来说，由于部分同步协议，消息有时会达到这些节点.</p>
<h3 id='f389afdd'><span class='with-space bd-content-title'>情况 4 (议长节点出现拜占庭)<a class='anchorjs-link ' href='#f389afdd' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h3>
<ul class='with-space'>
<li>
<p class='with-space'>现在我们处于高度 <code>4</code> 且视图编号为 <code>0</code> , 议长节点是 <code>N4</code> ;</p></li>
<li>
<p class='with-space'> <code>N4</code> 是恶意节点，且试图向网络发送一个不同的区块;</p></li>
<li>
<p class='with-space'>每个节点设计为只接受每个 <code>视图</code> 下的单的提案。在大多数 <code>M = 2f+1</code> 个节点不能就同一个提案达成共识之前(通过 <code>hash</code> 汇总)，不会提交任何节点。</p></li>
<li>
<p class='with-space'>如果 <code>M</code> 个节点提交了而另外的 <code>f = 2</code> 个节点缓存了一个不同的提案块，它们将在某个时刻收到一条 <code>Recover</code> 消息, 这将允许它们匹配哈希值。如果哈希值不同，我们将有一个针对这个议长节点的反证，这肯定会使得NEO持有者将这个节点从验证人中删除。</p></li>
</ul>
<h2 id='a51d3673'><span class='with-space bd-content-title'>一个由4个节点组成的共识<a class='anchorjs-link ' href='#a51d3673' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h2>
<p class='with-space'>正如你可能知道的那样，NEO区块链2.x中的地址由 <code>21</code> （表示 <a href='https://github.com/neo-project/neo-vm/blob/f81c3039d5fb4417b3c1ad780378c7f92499964a/src/neo-vm/OpCode.cs＃L144' target='_blank'> “向计算栈推送34个字节”</a> ）、 公钥和 <code>ac</code> （操作码，用于调用一个脚本来对地址见证人执行验证）组成。</p>
<p class='with-space'>建议读者看看以下文章：</p>
<ul class='with-space'>
<li>
<p class='with-space'> <a href='https://medium.com/neoresearch/understanding-multisig-on-neo-df9c9c1403b1' target='_blank'> 了解NEO的多方签名</a> 。</p></li>
</ul>
<p class='with-space'>让我们考虑具有以下公钥的节点（21 + rootOfPubKey + ac）：</p>
<ul class='with-space'>
<li>
<p class='with-space'>N1： <code>2102103a7f7dd016558597f7960d27c516a4394fd968b9e65155eb4b013e4040406eac</code> </p></li>
<li>
<p class='with-space'>N2： <code>2102a7bc55fe8684e0119768d104ba30795bdcc86619e864add26156723ed185cd62ac</code> </p></li>
<li>
<p class='with-space'>N3： <code>2102b3622bf4017bdfe317c58aed5f4c753f206b7db896046fa7d774bbc4bf7f8dc2ac</code> </p></li>
<li>
<p class='with-space'>N4： <code>2103d90c07df63e690ce77912e10ab51acc944b66860237b608c4f8f8309e71ee699ac</code> </p></li>
</ul>
<p class='with-space'>可以使用以下脚本来创建一个多方签名账户：</p>
<p class='with-space'> <code>532102103a7f7dd016558597f7960d27c516a4394fd968b9e65155eb4b013e4040406e2102a7bc55fe8684e0119768d104ba30795bdcc86619e864add26156723ed185cd622102b3622bf4017bdfe317c58aed5f4c753f206b7db896046fa7d774bbc4bf7f8dc22103d90c07df63e690ce77912e10ab51acc944b66860237b608c4f8f8309e71ee69954ae</code> </p>
<p class='with-space'>解读为： <code>53</code> （签名个数）+ <code>21</code> + <code>02 ... 6e</code> + <code>21</code> + <code>02 ... 62</code> + <code>21</code> + <code>02 ... c2</code> + <code>21</code> + <code>03 ... 99</code> + <code>54</code> （公钥所有者个数）+ <code>ae</code> </p>
<p class='with-space'>我们选择这4个节点作为验证人节点，下面的脚本将为每个区块提供签名，地址如下： <code>AZ81H31DMWzbSnFDLFkzh9vHwaDLayV7fU</code> 。后者可以通过将该脚本转换为“大端存储的脚本哈希”然后再进行base-58编码来获取。如果读者想要试着转换格式的话，我们建议访问 <a href='https://neocompiler.io/#!/ecolab/conversor' target='_blank'> NeoCompiler-Eco</a> 。</p>
<p class='with-space'><img class='d-inline-block img-fluid' data-original='./multisig_3_4.png' alt='multisig 3/4' referrerPolicy='no-referrer' /></p>
<p class='with-space'><img class='d-inline-block img-fluid' data-original='./scripthash_address.png' alt='scripthash to address base58' referrerPolicy='no-referrer' /></p>
<h2 id='bd9ecd93'><span class='with-space bd-content-title'>一个简单的单节点共识<a class='anchorjs-link ' href='#bd9ecd93' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h2>
<p class='with-space'>让我们以前面描述的第一个节点（N1）为例，通过将 <code>53</code> 和 <code>54</code> 转换为 <code>4f</code> ，来创建一个包含1个所有者和1个签名者的多签名账户。</p>
<p class='with-space'> <code>512102b3622bf4017bdfe317c58aed5f4c753f206b7db896046fa7d774bbc4bf7f8dc251ae</code> </p>
<p class='with-space'>后者将产生以下地址： <code>AbU69m8WUZJSWanfr1Cy66cpEcsmMcX7BR</code> </p>
<h2 id='b3a1ffd3'><span class='with-space bd-content-title'>阅读下节<a class='anchorjs-link ' href='#b3a1ffd3' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h2>
<p class='with-space'> <a href='../9-smartContract/What_is_smart_contract.html'> 什么是智能合约？</a> </p>
            </main>
            <div class="d-none d-lg-block side-nav py-2 py-md-5">
                <a href="https://github.com/neo-project/docs/blob/master/tutorial/zh-cn/7-consensus\4-Examples_and_consensus_scenarios_for_dBFT.md" class="contribution-link d-block">Improve this Doc</a>
                <div class="side-nav-text">In this article</div>
                <div id="navbar-sidenav">
                    <nav class='nav nav-pills flex-column'>
<a class='ml--2 d-none my-1 nav-link' href='#a401c5be'>dBFT 共识示例与场景</a>
<nav class='nav nav-pills flex-column'>
<a class='ml-0 my-1 nav-link' href='#ecc2ffda'>Watch-only模式的共识节点</a>
<a class='ml-0 my-1 nav-link' href='#d6bfa569'>dBFT 场景</a>
<nav class='nav nav-pills flex-column'>
<a class='ml-2 my-1 nav-link' href='#c3fcd62a'>创世块</a>
<a class='ml-2 my-1 nav-link' href='#eb1df0fb'>情况 1 (正常运行)</a>
<a class='ml-2 my-1 nav-link' href='#d049dccc'>情况 2 (议长故障)</a>
<a class='ml-2 my-1 nav-link' href='#b6349e3d'>情况 3 (提交之后发生故障)</a>
<a class='ml-2 my-1 nav-link' href='#f389afdd'>情况 4 (议长节点出现拜占庭)</a>
</nav>
<a class='ml-0 my-1 nav-link' href='#a51d3673'>一个由4个节点组成的共识</a>
<a class='ml-0 my-1 nav-link' href='#bd9ecd93'>一个简单的单节点共识</a>
<a class='ml-0 my-1 nav-link' href='#b3a1ffd3'>阅读下节</a>
</nav>
</nav>
                </div>
            </div>
        </div>
    </div>
    <div class="lightbulb" title="Turn On/Off" onclick="turnOff()">
        <i class="far fa-lightbulb"></i>
    </div>
    <footer>
        <div class="d-flex justify-content-between py-1 px-3 px-sm-4 px-md-5">
            <ul class="d-none d-md-block">
                <li><a href="https://github.com/neo-project/docs" title="GitHub" target="_blank">GitHub</a></li>
                <li><a href="https://github.com/neo-project/docs/issues" title="Issue" target="_blank">Issue</a></li>
                <li><a href="https://discord.io/neo" title="Discord" target="_blank">Discord</a></li>
            </ul>
            <p>Build by <a href="https://github.com/chenzhitong/NeoDocsBuilder" title="NeoDocsBuilder" target="_blank">NeoDocsBuilder</a></p>
            <p>Licensed under <a href="https://github.com/neo-project/docs/blob/master/LICENSE" title="CC-BY-4.0" target="_blank">CC-BY-4.0</a> license. </p>
        </div>
    </footer>
    <script src="https://neo-cdn.azureedge.net/lib/jquery/jquery.min.js"></script>
    <script src="https://neo-cdn.azureedge.net/lib/popper.js/popper.min.js"></script>
    <script src="https://neo-cdn.azureedge.net/lib/bootstrap/js/bootstrap.min.js"></script>
    <script src="https://neo-cdn.azureedge.net/js/jquery.lazyload.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js"></script>
    <script src="https://neo-cdn.azureedge.net/js/text-autospace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-130525731-2"></script>
    <script src="/js/site.min.js"></script>
    <script>
        //适用于FAQ的根据标题展开收缩
        if (false) {
            $("h2").click(function (e) {
                $(".div-collapse").not($(e.target).parents("h2").next()).hide("fast");
                $(e.target).parents("h2").next().toggle("fast");
            });
        }
    </script>
</body>
</html>

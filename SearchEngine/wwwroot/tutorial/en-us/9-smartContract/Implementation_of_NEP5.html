<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="robots" content="index,follow">
    <meta name="author" content="neo-project">
    <meta name="application-name" content="neo.org">
    <meta name="renderer" content="ie-stand">
    <title>Implementation of NEP-5</title>
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Neo Documentation" />
    <meta property="og:description" content="Neo Documentation" />
    <meta property="og:image" content="/img/twitter-img.jpg" />
    <meta name="twitter:title" content="Neo Documentation" />
    <meta name="twitter:description" content="Neo Documentation" />
    <meta name="twitter:image" content="/img/twitter-img.jpg" />
    <meta name="twitter:card" content="summary_large_image" />

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
    <link rel="manifest" href="/img/site.webmanifest">
    <link rel="mask-icon" href="/img/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#00aba9">
    <meta name="theme-color" content="#ffffff">

    <link href="https://neo-cdn.azureedge.net/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://neo-cdn.azureedge.net/lib/animate.css/animate.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/styles/default.min.css">
    <link href="/lib/font-awesome/css/all.min.css" rel="stylesheet" />
    <link href="/css/site.min.css" rel="stylesheet" />
</head>
<body data-spy="scroll" data-target="#navbar-sidenav">
    <nav class="navbar fixed-top navbar-expand-lg py-1 px-3 px-sm-4 px-md-5">
        <a class="navbar-brand" href="https://neo.org">
            <img class="logo" src="/img/logo.svg" alt="NEO Logo" />
            <img class="logo-dark" src="/img/logo-dark.svg" alt="NEO Logo" />
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/docs">Documentation</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/tutorial">Tutorial</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/faq">FAQ</a>
                </li>
                <li class="nav-item" style="margin-right: 100px">
                    <a class="nav-link" href="/articles">Articles</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link d-inline-block" href="javascript:" onclick="language('en-us')">EN</a>|<a class="nav-link d-inline-block" href="javascript:" onclick="language('zh-cn')">中文</a>
                </li>
            </ul>
            <form class="form-inline my-2 my-lg-0 d-none">
                <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
            </form>
        </div>
    </nav>
    <div class="container-fluid" style="margin-top: 55px">
        <div class="row d-flex">
            <div class="d-none d-md-block catalog py-2 py-md-5 pl-md-3">
                
<nav class='nav nav-pills flex-column ml-3'>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>Introduction to NEO</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/1-introduction/1-Introduction_to_NEO.html'>Introduction</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/1-introduction/2-Cryptography_Blockchain_and_Smart_Contracts.html'>Cryptography, Blockchain, and Smart Contracts</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/1-introduction/3-Fundamentals_of_NEO.html'>NEO Fundamentals</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/1-introduction/resource.html'>Additional Resources</a>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>Wallet</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/2-wallet/1-Introduction_to_wallets.html'>Introduction</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/2-wallet/2-Key_derivation_and_address_generation_on_NEO.html'>Keys and Addresses</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/2-wallet/3-Key_encryption_and_contract_accounts.html'>Private key encryption and Wallet files</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/2-wallet/4-UTXO_and_account_models.html'>The UTXO and Account models</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/2-wallet/resource.html'>Additional Resources</a>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>Transactions</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/3-transactions/1-Introduction_to_transactions.html'>Introduction</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/3-transactions/2-Structure_of_NEO_transactions.html'>Structure of NEO transactions</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/3-transactions/3-NEO_transaction_types.html'>NEO transaction types</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/3-transactions/4-NEO_transaction_fees.html'>Transaction fees</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/3-transactions/resource.html'>Additional Resources</a>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>Blocks</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/4-blocks/1-Introduction_to_blocks_and_blockchain.html'>Introduction</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/4-blocks/2-Structure_of_a_block.html'>Structure of a Block</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/4-blocks/3-Block_creation_broadcasting.html'>Block Creation and Broadcasting</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/4-blocks/4-Block_validation_processing.html'>Block Validation and Processing</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/4-blocks/resource.html'>Additional Resources</a>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>Network</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/5-network/1-Introduction_to_the_NEO_network_protocol.html'>NEO Network and Protocol</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/5-network/resource.html'>Additional Resources</a>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>Persistence</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/6-persistence/1-persistence.html'>Introduction</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/6-persistence/2-levelDB_data_structure.html'>Developing a NEO Ping using Golang</a>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>Consensus</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/7-consensus/1-Introduction_to_consensus.html'>Introduction</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/7-consensus/2-Proof_of_work_and_proof_of_stake.html'>PoW and PoS</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/7-consensus/3-PBFT_and_DBFT.html'>pBFT and dBFT</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/7-consensus/4-Examples_and_consensus_scenarios_for_dBFT.html'>dBFT Consensus Examples and Scenarios</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/7-consensus/resource.html'>Additional Resources</a>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>Smart Contract</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/9-smartContract/What_is_smart_contract.html'>Introduction</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/9-smartContract/Development_privateChain.html'>Setting up a Private Chain</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/9-smartContract/Development_set_up.html'>Setting up Development Enviroment</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/9-smartContract/Development_compile.html'>Contract Invoking and Deployment</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/9-smartContract/Smart_Contract_basics.html'>Smart Contract Basics</a>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>Make your NEP-5 Token</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/9-smartContract/What_is_nep5.html'>Introduction to NEP-5</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/9-smartContract/Implementation_of_NEP5.html'>Implementation of NEP-5</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/9-smartContract/Give_an_ITO.html'>ITO(Initial Token Offering)</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/9-smartContract/UTXO.html'>UTXO basics</a>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>CGAS</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/9-smartContract/cgas/1_what_is_cgas.html'>What is CGAS</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/9-smartContract/cgas/2_global_asset_and_nep5.html'>Global asset and NEP-5</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/9-smartContract/cgas/3_utxo_model.html'>UTXO model</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/9-smartContract/cgas/4_trigger.html'>Trigger</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/9-smartContract/cgas/5_minttokens_and_refund.html'>Mint and Refund</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/9-smartContract/cgas/6_signature_and_verification.html'>Signature and Verification</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/9-smartContract/cgas/7_invocation.html'>Transaction Invocation</a>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>Write NEO smart contract with Python</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/9-smartContract/neopython/part1_setup.html'>Installing and Setting up the Environment</a>
<a class='ml-0 my-1 nav-link' href='/tutorial/en-us/9-smartContract/neopython/part2_neopy.html'>Wallet Operations and Smart Contracts</a>
</nav>
</nav>
</nav>
            </div>
            <main class="p-3 p-sm-4 p-md-5">
                <a class="d-block d-md-none" href="javascript:" onclick="showCatalog()">Show / Hide Table of Contents</a>
                <figure><table class='table table-hover d-none'>
<thead>
<tr><th>layout</th><th>lang</th><th>lang-ref</th>
</tr>
</thead>
<tbody>
<tr><td>post</td><td>en</td><td>Implementation_of_NEP5</td>
</tr>
</tbody>
</table></figure>
<h1 id='a9273615'><span class='with-space bd-content-title'>Implementation of NEP-5<a class='anchorjs-link ' href='#a9273615' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h1>
<blockquote class='bd-callout with-space'>
<p class='with-space'> <strong>Objective</strong> :  Learn the general idea of NEP5</p>
<p class='with-space'> <strong>Main points</strong> :</p>
<ol>
<li>
<p class='with-space'>Implementation of each point according to the NEP-5 standard</p></li>
<li>
<p class='with-space'>Use your NEP-5 Token on the NEO-Gui</p></li>
</ol>
</blockquote>
<p class='with-space'>First of all, we define a readably property owner to present the owner of the contract. The is the <code>Owner</code> and it is a <code>20</code> length byte array.</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='// Here string &quot;xxx&quot; stands for the address you assigned as the onwer of address.
private static readonly byte[] Owner = &quot;xxxxxxxxxxxxxxxxxxxxx&quot;.ToScriptHash(); //Owner Address'>Copy</button><pre><code class='csharp' lang='csharp'>// Here string &quot;xxx&quot; stands for the address you assigned as the onwer of address.
private static readonly byte[] Owner = &quot;xxxxxxxxxxxxxxxxxxxxx&quot;.ToScriptHash(); //Owner Address
</code></pre>
</figure>
<p class='with-space'>Now we begin with the main method and the  trigger:</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='    public static object Main(string method, object[] args){
            if (Runtime.Trigger == TriggerType.Verification)
            {
                return Runtime.CheckWitness(Owner);
            }
            else if (Runtime.Trigger == TriggerType.Application)
            {
                return true;
            }
}'>Copy</button><pre><code class='csharp' lang='csharp'>    public static object Main(string method, object[] args){
            if (Runtime.Trigger == TriggerType.Verification)
            {
                return Runtime.CheckWitness(Owner);
            }
            else if (Runtime.Trigger == TriggerType.Application)
            {
                return true;
            }
}
</code></pre>
</figure>
<p class='with-space'>Here the main method accept two arguments. The first one is string <code>method</code> ,  which is a nep-5 method the user will call to this smart contract. The second one is an array <code>args</code> , which represents a list of arguments used in the nep-5 method.</p>
<p class='with-space'>Here we also judge the trigger here. When the triggerType is <code>Verification</code> , it means the end user invoke the transaction with the asset transaction. In other words, end user may want to send global asset such as NEO or GAS to or from this contract. In this condition, we should judge if the invoker ( or the Address that signed the contract ) is  owner.</p>
<p class='with-space'>When the triggerType is Application, that means the smart contract is being called by the application (Web/App) with  an InvocationTransaction. In this case, we should call other functions according to the method value. We will fill this part later.</p>
<p class='with-space'>Then we define the functions for name, symbol, decimals, which are fixed value for this contract.</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='[DisplayName(&quot;name&quot;)]
public static string Name() =&gt; &quot;MyToken&quot;; //name of the token'>Copy</button><pre><code class='csharp' lang='csharp'>[DisplayName(&quot;name&quot;)]
public static string Name() =&gt; &quot;MyToken&quot;; //name of the token
</code></pre>
</figure>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='[DisplayName(&quot;decimals&quot;)]
public static byte Decimals() =&gt; 8;'>Copy</button><pre><code class='csharp' lang='csharp'>[DisplayName(&quot;decimals&quot;)]
public static byte Decimals() =&gt; 8;
</code></pre>
</figure>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='[DisplayName(&quot;symbol&quot;)]
public static string Symbol() =&gt; &quot;MYT&quot;; //symbol of the token'>Copy</button><pre><code class='csharp' lang='csharp'>[DisplayName(&quot;symbol&quot;)]
public static string Symbol() =&gt; &quot;MYT&quot;; //symbol of the token
</code></pre>
</figure>
<p class='with-space'>We also need  define a Transfer event which is also specified in the <code>NEP-5</code> standard.</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='[DisplayName(&quot;transfer&quot;)]
public static event Action&lt;byte[], byte[], BigInteger&gt; Transferred;'>Copy</button><pre><code class='csharp' lang='csharp'>[DisplayName(&quot;transfer&quot;)]
public static event Action&lt;byte[], byte[], BigInteger&gt; Transferred;
</code></pre>
</figure>
<p class='with-space'>Now. Let&#39;s define the totalSupply method of the contract. Before that, we should first define a <code>deploy</code> method. The deploy method is not specified in the <code>NEP-5</code> standard, but should be the first function that called by smart contract owner and called only once. The purpose of deploy function is to set the <code>totalSupply</code> value of your <code>NEP-5</code> token, and move all the token into the Owner&#39;s account balance.</p>
<p class='with-space'>It is worth noticing that, in tokenized smart contract, the asset is stored in the storage as the key is the address and the value is the balance. Here is the table which may declare it.</p>
<figure class='with-space'><table class='table table-hover'>
<thead><tr><th>Address</th><th>value</th></tr></thead>
<tbody><tr><td>address1</td><td>1000</td></tr><tr><td>address2</td><td>200</td></tr>
</tbody>
</table></figure>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='//Static readonly value of total supply value
private static readonly BigInteger TotalSupplyValue = 10000000000000000;'>Copy</button><pre><code class='csharp' lang='csharp'>//Static readonly value of total supply value
private static readonly BigInteger TotalSupplyValue = 10000000000000000;
</code></pre>
</figure>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='[DisplayName(&quot;deploy&quot;)]
public static bool Deploy()
{
      if (TotalSupply() != 0) return false;
      StorageMap contract = Storage.CurrentContext.CreateMap(nameof(contract));
      contract.Put(&quot;totalSupply&quot;, TotalSupplyValue);
      StorageMap asset = Storage.CurrentContext.CreateMap(nameof(asset));
      //The contract owner own the total nep-5 token
      asset.Put(Owner, TotalSupplyValue);
      // This is the Event we should fire when NEP-5 asset transferred
      Transferred(null, Owner, TotalSupplyValue);
      return true;
}'>Copy</button><pre><code class='csharp' lang='csharp'>[DisplayName(&quot;deploy&quot;)]
public static bool Deploy()
{
      if (TotalSupply() != 0) return false;
      StorageMap contract = Storage.CurrentContext.CreateMap(nameof(contract));
      contract.Put(&quot;totalSupply&quot;, TotalSupplyValue);
      StorageMap asset = Storage.CurrentContext.CreateMap(nameof(asset));
      //The contract owner own the total nep-5 token
      asset.Put(Owner, TotalSupplyValue);
      // This is the Event we should fire when NEP-5 asset transferred
      Transferred(null, Owner, TotalSupplyValue);
      return true;
}
</code></pre>
</figure>
<p class='with-space'>Now , we have the totalSupply defined in the deployment stage, we can fill our totalSupply method, which get the totalSupply value from the storage.</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='[DisplayName(&quot;totalSupply&quot;)]
public static BigInteger TotalSupply()
{
    StorageMap contract = Storage.CurrentContext.CreateMap(nameof(contract));
    return contract.Get(&quot;totalSupply&quot;).AsBigInteger();
}'>Copy</button><pre><code class='csharp' lang='csharp'>[DisplayName(&quot;totalSupply&quot;)]
public static BigInteger TotalSupply()
{
    StorageMap contract = Storage.CurrentContext.CreateMap(nameof(contract));
    return contract.Get(&quot;totalSupply&quot;).AsBigInteger();
}
</code></pre>
</figure>
<p class='with-space'>Let&#39;s set another method <code>balanceOf</code> , which get the account <code>NEP-5</code> balance of a specified address</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text=' [DisplayName(&quot;balanceOf&quot;)]
public static BigInteger BalanceOf(byte[] account)
{
      // Do an argument check
      if (account.Length != 20)
          throw new InvalidOperationException(&quot;The parameter account SHOULD be 20-byte addresses.&quot;);
      StorageMap asset = Storage.CurrentContext.CreateMap(nameof(asset));
      return asset.Get(account).AsBigInteger();
}'>Copy</button><pre><code class='csharp' lang='csharp'> [DisplayName(&quot;balanceOf&quot;)]
public static BigInteger BalanceOf(byte[] account)
{
      // Do an argument check
      if (account.Length != 20)
          throw new InvalidOperationException(&quot;The parameter account SHOULD be 20-byte addresses.&quot;);
      StorageMap asset = Storage.CurrentContext.CreateMap(nameof(asset));
      return asset.Get(account).AsBigInteger();
}
</code></pre>
</figure>
<p class='with-space'>Now, we have defined almost all the method required in the <code>NEP-5</code> standard except the transfer method, let us fill the main method first.</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='public static object Main(string method, object[] args)
{
     if (Runtime.Trigger == TriggerType.Verification)
     {
         return Runtime.CheckWitness(Owner);
     }
     else if (Runtime.Trigger == TriggerType.Application)
     {
         if (method == &quot;balanceOf&quot;) return BalanceOf((byte[])args[0]);

         if (method == &quot;decimals&quot;) return Decimals();

         if (method == &quot;name&quot;) return Name();

         if (method == &quot;symbol&quot;) return Symbol();

         if (method == &quot;supportedStandards&quot;) return SupportedStandards();

         if (method == &quot;totalSupply&quot;) return TotalSupply();

         if (method == &quot;transfer&quot;) return Transfer((byte[])args[0], (byte[])args[1], (BigInteger)args[2]);
      }
     return false;
}'>Copy</button><pre><code class='csharp' lang='csharp'>public static object Main(string method, object[] args)
{
     if (Runtime.Trigger == TriggerType.Verification)
     {
         return Runtime.CheckWitness(Owner);
     }
     else if (Runtime.Trigger == TriggerType.Application)
     {
         if (method == &quot;balanceOf&quot;) return BalanceOf((byte[])args[0]);

         if (method == &quot;decimals&quot;) return Decimals();

         if (method == &quot;name&quot;) return Name();

         if (method == &quot;symbol&quot;) return Symbol();

         if (method == &quot;supportedStandards&quot;) return SupportedStandards();

         if (method == &quot;totalSupply&quot;) return TotalSupply();

         if (method == &quot;transfer&quot;) return Transfer((byte[])args[0], (byte[])args[1], (BigInteger)args[2]);
      }
     return false;
}
</code></pre>
</figure>
<p class='with-space'>Now, the only method left is  the transfer method. What the transfer function has to do is first checking the arguments and check if the contract invoker is the owner. If it meets all requirements, get the <code>from</code> address&#39;s balance from the storage, and check if it has enough asset to deal with the transfer. If it has enough amount <code>NEP-5</code> token,  do the calculation and update the new account balance for the <code>from</code> account and <code>to</code> account.</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='private static bool Transfer(byte[] from, byte[] to, BigInteger amount, byte[] callscript)
{
      //Check parameters
      if (from.Length != 20 || to.Length != 20)
          throw new InvalidOperationException(&quot;The parameters from and to SHOULD be 20-byte addresses.&quot;);
      if (amount &lt;= 0)
          throw new InvalidOperationException(&quot;The parameter amount MUST be greater than 0.&quot;);
      if (!Runtime.CheckWitness(from))
          return false;
      StorageMap asset = Storage.CurrentContext.CreateMap(nameof(asset));
      var fromAmount = asset.Get(from).AsBigInteger();
      if (fromAmount &lt; amount)
          return false;
      if (from == to)
          return true;

      //Reduce payer balances
      if (fromAmount == amount)
          asset.Delete(from);
      else
          asset.Put(from, fromAmount - amount);

      //Increase the payee balance
      var toAmount = asset.Get(to).AsBigInteger();
      asset.Put(to, toAmount + amount);

      Transferred(from, to, amount);
      return true;
  }'>Copy</button><pre><code class='csharp' lang='csharp'>private static bool Transfer(byte[] from, byte[] to, BigInteger amount, byte[] callscript)
{
      //Check parameters
      if (from.Length != 20 || to.Length != 20)
          throw new InvalidOperationException(&quot;The parameters from and to SHOULD be 20-byte addresses.&quot;);
      if (amount &lt;= 0)
          throw new InvalidOperationException(&quot;The parameter amount MUST be greater than 0.&quot;);
      if (!Runtime.CheckWitness(from))
          return false;
      StorageMap asset = Storage.CurrentContext.CreateMap(nameof(asset));
      var fromAmount = asset.Get(from).AsBigInteger();
      if (fromAmount &lt; amount)
          return false;
      if (from == to)
          return true;

      //Reduce payer balances
      if (fromAmount == amount)
          asset.Delete(from);
      else
          asset.Put(from, fromAmount - amount);

      //Increase the payee balance
      var toAmount = asset.Get(to).AsBigInteger();
      asset.Put(to, toAmount + amount);

      Transferred(from, to, amount);
      return true;
  }
</code></pre>
</figure>
<p class='with-space'>Now the NEP-5 Token has been finished and it can be tested on our <a href='Development_set_up.html'> privateNet</a> . You can also view source code <a href='https://github.com/neo-ngd/NEO-Tutorial/blob/steven/smartContract/sourceCode/NEP5.cs' target='_blank'> here</a> </p>
<p class='with-space'>After compile the NEP5.cs and get the avm file, deploy it. And if the contract is already deployed on the blockchain, first invoke the deploy method which initial the totalSupply of the token. <p align="center"> 	<img src="imgs/20190222-153331.png"> </p> <p align="center"> 	<img src="imgs/20190222-1https://peterlinx.github.io/DataTransformationTools/53712.png">&lt;/p&gt;</p>
<p class='with-space'>Now, in the NEO-GUI click <code>Advanced</code> -&gt; <code>Option</code> , add the scriptHash of your contract, you can view the NEP-5 asset you have in the Asset tab。</p>
<p class='with-space'><p align="center"> 	<img src="imgs/20190222-153941.png"/> </p></p>
<p class='with-space'>Let&#39;s test another transfer method in the NEP-5 standard. Open the invocation function tab and fill in the arguments. The string part is the method of smart contract you want to call. Here we put <code>transfer</code> . In the array, the arguments are <code>from</code> , <code>to</code> , <code>amount</code> . The <code>From</code> address and <code>To</code> address are in the format of byte array which can be  changed by the wallet address. For instance, use this <a href='https://peterlinx.github.io/DataTransformationTools/' target='_blank'> tool link</a> which transfer the wallet address to byte array. For the <code>amount</code> , do not forget the 10<sup>8</sup>decimal. Here I want to transfer  250000000 my NEP-5 token from my account to other account</p>
<p class='with-space'><p align="center"> 	<img src="imgs/20190222-155235.png"/> </p></p>
<p class='with-space'>After the transaction to be recorded and confirmed, you can open the wallet of the target address and view the updated balance of NEP-5. <p align="center"> 	<img src="imgs/20190222-155608.png"> </p></p>
<h2 id='d1732c4d'><span class='with-space bd-content-title'>Assignment<a class='anchorjs-link ' href='#d1732c4d' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h2>
<p class='with-space'>Define a new NEP5-token by yourself.</p>
<h2 id='c7f5ef62'><span class='with-space bd-content-title'>Next Step<a class='anchorjs-link ' href='#c7f5ef62' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h2>
<p class='with-space'>In this tutorial, you have learned the standard of NEP-5 and how to implement the NEP-5 standard by define your own token. Now we can extend this step and go to <a href='Give_an_ITO.html'> offer our token and make it publicly available</a> </p>
<p class='with-space'>If you want to know what is NEP5, click <a href='What_is_nep5.html'> here</a> .</p>
            </main>
            <div class="d-none d-lg-block side-nav py-2 py-md-5">
                <a href="https://github.com/neo-project/docs/blob/master/tutorial/en-us/9-smartContract\Implementation_of_NEP5.md" class="contribution-link d-block">Improve this Doc</a>
                <div class="side-nav-text">In this article</div>
                <div id="navbar-sidenav">
                    <nav class='nav nav-pills flex-column'>
<a class='ml--2 d-none my-1 nav-link' href='#a9273615'>Implementation of NEP-5</a>
<nav class='nav nav-pills flex-column'>
<a class='ml-0 my-1 nav-link' href='#d1732c4d'>Assignment</a>
<a class='ml-0 my-1 nav-link' href='#c7f5ef62'>Next Step</a>
</nav>
</nav>
                </div>
            </div>
        </div>
    </div>
    <div class="lightbulb" title="Turn On/Off" onclick="turnOff()">
        <i class="far fa-lightbulb"></i>
    </div>
    <footer>
        <div class="d-flex justify-content-between py-1 px-3 px-sm-4 px-md-5">
            <ul class="d-none d-md-block">
                <li><a href="https://github.com/neo-project/docs" title="GitHub" target="_blank">GitHub</a></li>
                <li><a href="https://github.com/neo-project/docs/issues" title="Issue" target="_blank">Issue</a></li>
                <li><a href="https://discord.io/neo" title="Discord" target="_blank">Discord</a></li>
            </ul>
            <p>Build by <a href="https://github.com/chenzhitong/NeoDocsBuilder" title="NeoDocsBuilder" target="_blank">NeoDocsBuilder</a></p>
            <p>Licensed under <a href="https://github.com/neo-project/docs/blob/master/LICENSE" title="CC-BY-4.0" target="_blank">CC-BY-4.0</a> license. </p>
        </div>
    </footer>
    <script src="https://neo-cdn.azureedge.net/lib/jquery/jquery.min.js"></script>
    <script src="https://neo-cdn.azureedge.net/lib/popper.js/popper.min.js"></script>
    <script src="https://neo-cdn.azureedge.net/lib/bootstrap/js/bootstrap.min.js"></script>
    <script src="https://neo-cdn.azureedge.net/js/jquery.lazyload.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js"></script>
    <script src="https://neo-cdn.azureedge.net/js/text-autospace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-130525731-2"></script>
    <script src="/js/site.min.js"></script>
    <script>
        //适用于FAQ的根据标题展开收缩
        if (false) {
            $("h2").click(function (e) {
                $(".div-collapse").not($(e.target).parents("h2").next()).hide("fast");
                $(e.target).parents("h2").next().toggle("fast");
            });
        }
    </script>
</body>
</html>
